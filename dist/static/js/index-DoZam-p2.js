var j=Object.defineProperty,A=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var I=(a,t,e)=>t in a?j(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,O=(a,t)=>{for(var e in t||(t={}))q.call(t,e)&&I(a,e,t[e]);if(R)for(var e of R(t))z.call(t,e)&&I(a,e,t[e]);return a},D=(a,t)=>A(a,F(t));var B=(a,t,e)=>(I(a,typeof t!="symbol"?t+"":t,e),e);var U=(a,t,e)=>new Promise((l,m)=>{var _=o=>{try{r(e.next(o))}catch(v){m(v)}},V=o=>{try{r(e.throw(o))}catch(v){m(v)}},r=o=>o.done?l(o.value):Promise.resolve(o.value).then(_,V);r((e=e.apply(a,t)).next())});import{v as K,a6 as f,d as W,r as E,K as y,k as Y,f as L,B as G,i as s,w as n,u,a7 as P,b as c,e as J,h as k,a8 as Q}from"./index-CpDnptRB.js";import{_ as X}from"./register.vue_vue_type_script_setup_true_lang-yl_80sjK.js";var Z={VITE_PORT:"8848",VITE_HIDE_HOME:"false",VITE_PUBLIC_PATH:"/",VITE_ROUTER_HISTORY:"hash",VITE_CDN:"false",VITE_COMPRESSION:"none",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ee={baseURL:Z.VITE_API_URL,timeout:2e4,withCredentials:!0};class te{constructor(t){B(this,"service");this.service=K.create(t),this.service.interceptors.request.use(e=>{const l=localStorage.getItem("token")||"";return D(O({},e),{headers:{"x-access-token":l}})},e=>{Promise.reject(e)}),this.service.interceptors.response.use(e=>{const{data:l,config:m}=e;return l.code===600?(localStorage.setItem("token",""),Promise.reject(l)):l.code&&l.code!==200?(f.error(l),Promise.reject(l)):l},e=>{const{response:l}=e;l&&this.handleCode(l.status),window.navigator.onLine||f.error("网络连接失败")})}handleCode(t){switch(t){case 401:f.error("登录失败，请重新登录");break;default:f.error("请求失败");break}}get(t,e){return this.service.get(t,{params:e})}post(t,e){return this.service.post(t,e)}put(t,e){return this.service.put(t,e)}delete(t,e){return this.service.delete(t,{params:e})}}const b=new te(ee),ae=a=>b.post("/api/user/createUser",a),oe=()=>b.get("/api/user/findUserLists"),se=a=>b.post("/api/user/updateUserInfo",a),le=a=>b.post("/api/user/deleteUser",a),re={class:"testDemo"},ne={class:"dialog-footer"},T="140px",ce=W({__name:"index",setup(a){const t=E("hello world");y({name:"",pwd:""});const e=E(""),l=()=>{e.value="新增",r.value=!0};let m=y({list:[]}),_=()=>U(this,null,function*(){let p=yield oe();m.list=p.data.data});_();const V=p=>{Q.confirm("确定删除吗？","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{le(p).then(d=>{f({type:"success",message:"Delete completed"}),_()})}).catch(()=>{f({type:"info",message:"Delete canceled"})})};let r=E(!1),o=y({username:"",nickname:"",password:""});const v=p=>{e.value="编辑",r.value=!0,o=p},S=()=>U(this,null,function*(){e.value==="新增"?yield ae(o):e.value==="编辑"&&(yield se(o)),r.value=!1,x(),_()}),x=()=>{o.username="",o.nickname="",o.password=""};return(p,d)=>{const w=c("el-button"),g=c("el-table-column"),M=c("el-table"),h=c("el-input"),C=c("el-form-item"),H=c("el-form"),N=c("el-dialog");return J(),Y("div",null,[L("div",re,G(t.value),1),s(w,{type:"primary",onClick:l},{default:n(()=>[k("新增")]),_:1}),s(M,{data:u(m).list,style:{width:"100%"}},{default:n(()=>[s(g,{prop:"id",label:"id"}),s(g,{prop:"username",label:"username"}),s(g,{prop:"nickname",label:"nickname"}),s(g,{prop:"password",label:"password"}),s(g,{fixed:"right",label:"Operations",width:"120"},{default:n(i=>[s(w,{link:"",type:"primary",size:"small",onClick:$=>v(i.row)},{default:n(()=>[k("编辑")]),_:2},1032,["onClick"]),s(w,{link:"",type:"primary",size:"small",onClick:$=>V(i.row)},{default:n(()=>[k("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),s(N,{modelValue:u(r),"onUpdate:modelValue":d[4]||(d[4]=i=>P(r)?r.value=i:r=i),title:e.value,width:"500",draggable:""},{footer:n(()=>[L("div",ne,[s(w,{onClick:d[3]||(d[3]=i=>P(r)?r.value=!1:r=!1)},{default:n(()=>[k("Cancel")]),_:1}),s(w,{type:"primary",onClick:S},{default:n(()=>[k(" Confirm ")]),_:1})])]),default:n(()=>[s(H,{model:u(o),onResetFields:x},{default:n(()=>[s(C,{label:"username","label-width":T},{default:n(()=>[s(h,{modelValue:u(o).username,"onUpdate:modelValue":d[0]||(d[0]=i=>u(o).username=i),modelModifiers:{trim:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(C,{label:"nickname","label-width":T},{default:n(()=>[s(h,{modelValue:u(o).nickname,"onUpdate:modelValue":d[1]||(d[1]=i=>u(o).nickname=i),modelModifiers:{trim:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(C,{label:"password","label-width":T},{default:n(()=>[s(h,{modelValue:u(o).password,"onUpdate:modelValue":d[2]||(d[2]=i=>u(o).password=i),modelModifiers:{trim:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),s(X)])}}});export{ce as default};
